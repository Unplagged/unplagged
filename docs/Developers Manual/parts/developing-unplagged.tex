\chapter{Developing Unplagged}\label{chap:developingUnplagged}

Coming from the \nameref{chap:systemRequirements} here we have yet another set of requirements for you, before we can
start with the actual description of the technologies used for development in the system. This time it's 
about what we believe will be helpful or sometimes even necessary for the development of Unplagged. 

First of all, the programming languages mostly used in Unplagged are PHP and JavaScript, both of which in conjuction
with a framework. Teaching programming languages is, as you probably can imagine well beyond the scope of this document,
but we will at least try to cover the most important concepts of the frameworks as they occur. 

The used frameworks are 
\href{http://jquery.com/}{jQuery} for Javascript and \href{http://framework.zend.com/docs/overview}{ZEND} for PHP 
respectively. jQuery is kind of the industry standard for unobtrusive scripting with about 50\% 
of the Top 10.000 websites using it according to \citet*{Trends} and the Zend framework is also well established and
brings a lot of features, that are useful to this project.

For most of the other topics, we will give you some (hopefully) helpful resources on the way, if it isn't covered 
thoroughly by us. But just to let you
know, here is a list of the buzzwords, er technologies that will be mentioned:

\begin{itemize}
\item CSS3
\item HTML5
\item Continous Integration
\item Responsive Webdesign
\item Git
\item Netbeans
\item LAMP or similar for your operating system
\end{itemize}

As said in section \nameref{platforms}, the system is developed in a way, so that it should work on multiple platforms. 
This makes it sometimes difficult to describe certain installation processes in a way that would work for everybody. As
it's often most problematic, to get some Linux software running on Windows, we will mostly concentrate on the way those
things are done on this platform and give the instructions for other operating systems as an aside.

\section{Development Environment}

\subsection{Git}
The version control of all parts of the unplagged project is managed through Git. Since 2005, Git got more and more famous and many developers prefer it over Subversion because of its simplicity. However, nobody of our team ever used Git before so it was a challenge to get it running on all the systems. But we took the challenge to explore all the features Git offers. It is so much easier to create different branches and merge them again, than it is with other version control softwares like Subversion.\\
\\
If you didn't use git before, you probably should watch this 8 minutes Git introduction video first:
http://www.youtube.com/watch?v=RDGzF2M-zlo\\
\\
\textbf{\textit{Installating the Git Bash}}
\\
First of all let's get started with an introduction of how to install the Git console application, called Git Bash. 
Unfortunately all the GUIs we were evaluating didn't work as expected, so we decided to use it from the console only. 
A very good instruction on how to install the Git Bash can be found on the website of the github project:
\\
\\
Mac OS X: http://help.github.com/mac-set-up-git/
\\
Windows: http://help.github.com/win-set-up-git/
\\
Linux: http://help.github.com/linux-set-up-git/
\\
\\
\textbf{\textit{Getting the source code of the unplagged project}}
\\
Now it is time to get the project source code on your machine. The whole unplagged project is hosted on github, so first you need to create an account on https://github.com. And then go to the directory where the project shall be located. An example for Mac OS X:

\begin{verbatim}
cd Sites/unplagged.local
git clone https://<yourusername>@github.com/benoertel/unplagged.git
\end{verbatim}

\textbf{\textit{The most important git commands}}

You are ready to use Git! Here are some more instructions on the most important commands and how to properly use it. However, if the given instructions in this manuall are not enough, feel free to checkout the whole Git manual on: http://schacon.github.com/git/user-manual.html

The unplagged project consists of several branches, which are used to develop and store code indepdently of the other developers. Once a new feature is done, it is merged into the master branch. The master branch usually includes only fully tested and deployable source code. 

As a new developer, it is important to create your own branch before doing anything else and switch into it.
\begin{verbatim}
git branch mynewfeature
git checkout mynewfeature
\end{verbatim}

Now you can change whatever you want in the repository.At any point you can store your changes in the repository by using the git commit command. If you created new files, git add has to be executed as well.

\begin{verbatim}
git add .
git commit -m "A message that describes the changes."
\end{verbatim}

When the feature is fully working and approved, it has to be merged back to the master branch, in order to get deployed to the staging environment. To do this, you have to checkout the master branch, update it with git pull and then merge all the changes from the new feature into the master branch and remove the feature branch.
\begin{verbatim}
git checkout master
git pull
git merge mynewfeature
git branch -d mynewfeature
\end{verbatim}

In comparison to Subversion, for example Git has one more step to really write back to the repository. After a commit, a push has to be done, each push can include multiple commits.
\begin{verbatim}
git push
\end{verbatim}

This is it, the changes to the repository have been pushed to the master branch.

\textbf{\textit{Handling conflicts in merging process}}
It is possible, if two developers were working on the same part of  file, that a conflict raises during the merge. Such a conflict could look like this:
\begin{verbatim}
CONFLICT (content): Merge conflict in readme.txt

To https://github.com/benoertel/unplagged.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'https://github.com/benoertel/unplagged.git'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details.
\begin{verbatim}
# Unmerged paths:
#   (use "git add/rm <file>..." as appropriate to mark resolution)
#
#    both modified:      readme.txt
#
\end{verbatim}
To reslove the issues, open the files listed in the error message, in this case "readme.txt" and decide how the correct version should look like, by removing all the "< < < < < < <  HEAD" and "> > > > > > > b478801d68267ef479acc5ca54544634c52c545c" parts.

\begin{verbatim}
<<<<<<< HEAD
The goal of this project is the creation of an easy-to-use, web-based
system to document and detect plagiarism in scientific papers.

hello world
=======

The goal of this project is the creation of an easy-to-use, web-based
system to document and detect plagiarism in scientific papers.

>>>>>>> b478801d68267ef479acc5ca54544634c52c545c
Just a change for educational purposes.
\end{verbatim}

Should look like this after merging:
\begin{verbatim}
The goal of this project is the creation of an easy-to-use, web-based
system to document and detect plagiarism in scientific papers.

hello world

Just a change for educational purposes.
\end{verbatim}

\subsection{Netbeans}

\subsection{Staging and Preview System}

This subsection will describe how to configure a virtual host properly. A virtual host is a domain that is mapped to the local web server. It is assumed that Apache, MySQL and PHP are already running on the machine. If not, here are some tutorial to get them all running:

Windows: \href{http://www.apachefriends.org/de/xampp-windows.html#1098}{XAMPP installation instructions}

Mac OS: \href{http://www.djangoapp.com/blog/2011/07/24/installation-of-mysql-server-on-mac-os-x-lion/}{Installation of MySQL} \href{http://www.quarkstar.at/index.php/2009/05/18/webserver-aktivieren-und-konfigurieren-in-mac-os-x/}{Activating Apache, PHP}
\\\\The first step is to add the virtual host to the vhost config: 

Mac OS: 
\begin{verbatim}
sudo vi /private/etc/hosts
add the following line: "127.0.0.1 unplagged.local"
\end{verbatim}
Windows:
\begin{verbatim}
Open C:\WINDOWS\system32\drivers\etc\hosts
add the following line: "127.0.0.1 unplagged.local"
\end{verbatim}
Now, the host has to be configured in the file

Mac OS:
\begin{verbatim}
sudo vi /private/etc/apache2/extra/httpd-vhosts.conf
\end{verbatim}
Windows:
\begin{verbatim}
Open C:\xampp\apache\conf\httpd.conf
Uncomment #Include conf/extra/httpd-vhosts.conf
Edit X:\<path to your xampp installation>\apache\conf\extra\httpd-vhosts.conf
\end{verbatim}

Add the following configuration to the httpd-vhosts.conf file:
\begin{verbatim}
<VirtualHost *:80>
ServerName unplagged.local
DocumentRoot "/Users/me/Sites/unplagged.local/public" 
SetEnv APPLICATION_ENV "development" 
<Directory /Users/benjamin/Sites/unplagged.local/public>
Options +Indexes +FollowSymLinks +ExecCGI
DirectoryIndex /index.php
AllowOverride All
Order allow,deny
Allow from all
</Directory>
</VirtualHost>
\end{verbatim}

\section{Installation}
\subsection{Tesseract}
\subsection{Simtext}
\subsection{Imagemagick}



\section{Architectural Goals}

\subsection{Progressive Enhancement}

\subsection{Test Driven Development}

\subsection{Responsive Design}