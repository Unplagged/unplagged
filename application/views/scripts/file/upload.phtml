<?php
$currentCase = Zend_Registry::get('user')->getCurrentCase();

function return_bytes($val){
  $val = trim($val);
  $last = strtolower($val[strlen($val) - 1]);
  switch($last){
    // The 'G' modifier is available since PHP 5.1.0
    case 'g':
      $val *= 1024;
    case 'm':
      $val *= 1024;
    case 'k':
      $val *= 1024;
  }

  return $val;
}

$maxFileSize = return_bytes(ini_get('upload_max_filesize'));
$maxPostSize = return_bytes(ini_get('post_max_size'));

if($maxPostSize<$maxFileSize){
  $maxFileSize = $maxPostSize;  
}
?>

<div id="upload-queue"
     data-maxFileSize="<?php echo $maxPostSize; ?>"
     data-showAddToCase="<?php echo ($currentCase) ? 'true' : ''; ?>"
     data-close="<?php echo $this->translate('Close'); ?>" 
     data-addToCase="<?php echo $this->translate('Add to current case'); ?>" 
     data-redirect="<?php echo $this->baseUrl('user/files'); ?>" 
     data-makePublic="<?php echo $this->translate('Make public'); ?>" 
     data-save="<?php echo $this->translate('Save'); ?>" 
     data-file-information="<?php echo $this->translate('File information'); ?>" 
     data-description="<?php echo $this->translate('Description'); ?>" 
     data-filename="<?php echo $this->translate('Filename'); ?>"></div>