<?php
$this->title = $this->translate('Uploaded files');
$this->headTitle($this->title);
?>
<table cellpadding="0" cellspacing="0" class="default">
  <tr>
    <th style="width: 20px;">&nbsp;</th>
    <th><?php echo $this->translate("Filename"); ?></th>
    <th style="width: 110px;"><?php echo $this->translate("Uploaded"); ?></th>
    <th style="width: 100px;"><?php echo $this->translate("Actions"); ?></th>
  </tr>

  <?php $i = 0; ?>
  <?php foreach($this->paginator as $file): ?>
    <tr <?php echo ($i++ % 2 == 0) ? 'class="even"' : ""; ?>>
      <td>
          <img class="icon" src="<?php echo $this->baseUrl('images/icons/' . Unplagged_Helper::getFileIconByExtenstion($file->getExtension()));?>" />
      </td>
      <td>
          <a <?php if($file->isImage()){ echo 'class="picture"'; } ?> href="<?php echo $this->baseUrl('/image/view/id/' . $file->getId());?>">          
              <?php echo $file->getFilename(); ?>
          </a>
      </td>
      <td><?php echo $file->getCreated()->format('Y-m-d'); ?></td>
      <td><?php if($file->getIsTarget()){ ?>
          <a href="<?php echo "/file/unset-target/id/" . $file->getId(); ?>"><img class="icon" src="<?php echo $this->baseUrl('images/icons/page_find.png'); ?>" title="<?php echo $this->translate("unset target"); ?>" /></a>
        <?php }else{ ?>
          <a href="<?php echo "/file/set-target/id/" . $file->getId(); ?>" class="target"><img class="icon" src="<?php echo $this->baseUrl('images/icons/page.png'); ?>" title="<?php echo $this->translate("set target"); ?>" /></a>
        <?php } ?>
        <a href="<?php echo "/file/parse/id/" . $file->getId(); ?>"><img class="icon" src="<?php echo $this->baseUrl('images/icons/page_gear.png'); ?>" title="<?php echo $this->translate("parse"); ?>" /></a>
        <a href="<?php echo "/file/download/id/" . $file->getId(); ?>"><img class="icon" src="<?php echo $this->baseUrl('images/icons/disk.png'); ?>" title="<?php echo $this->translate("download"); ?>" /></a>
        <a href="<?php echo "/file/delete/id/" . $file->getId(); ?>"><img class="icon" src="<?php echo $this->baseUrl('images/icons/delete.png'); ?>" title="<?php echo $this->translate("delete"); ?>" /></a>
      </td>
    </tr>
  <?php endforeach; ?>
</table>
<?php echo $this->paginationControl($this->paginator, 'Sliding', 'pagination-control.phtml'); ?>

<div class="smork-btn upload-icon">
  <a href="/file/upload"><span><?php echo $this->translate("Upload a file"); ?></span></a>
</div>